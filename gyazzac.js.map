{"version":3,"sources":["webpack:///gyazzac.js","webpack:///webpack/bootstrap a1eec22a43af80eee22c","webpack:///./src/gyazzac.coffee"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","GyazzA","ac_lines","ac_page","ac_page_total","attachAC","fetchGyazz","gyazz_lines","observer","progress","refresh","window_size","changeFlag","$","each","index","$line","$this","this","children","html","level","attr","timer","window","BASE_URL","append","prepend","resize","clearTimeout","setTimeout","document","body","style","zoom","width","ac","i","j","k","len","len1","line","n","page","pages","createElement","innerHTML","text","length","className","appendChild","eq","addClass","pp","css","Math","floor","prototype","prev","removeClass","next","MutationObserver","mutations","observe","querySelector","attributes","attributeFilter","scrollTop","off","on","e","order","which","preventDefault","toggleClass"],"mappings":"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","file":"gyazzac.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\tvar GyazzA;\n\t\n\tGyazzA = (function() {\n\t  var ac_lines, ac_page, ac_page_total, attachAC, fetchGyazz, gyazz_lines, observer, progress, refresh, window_size;\n\t\n\t  function GyazzA() {}\n\t\n\t  gyazz_lines = [];\n\t\n\t  ac_lines = [];\n\t\n\t  ac_page = 0;\n\t\n\t  ac_page_total = 0;\n\t\n\t  observer = null;\n\t\n\t  window_size = '980';\n\t\n\t  fetchGyazz = function() {\n\t    var changeFlag;\n\t    changeFlag = false;\n\t    $('#contents > div:visible').each(function(index) {\n\t      var $line, $this;\n\t      $this = $(this);\n\t      $line = $this.children('span').html();\n\t      if (gyazz_lines[index] !== $line) {\n\t        gyazz_lines[index] = $line;\n\t        ac_lines[index] = {\n\t          level: $this.attr('class'),\n\t          html: $line\n\t        };\n\t        return changeFlag = true;\n\t      }\n\t    });\n\t    if (changeFlag) {\n\t      refresh();\n\t    }\n\t  };\n\t\n\t  attachAC = function() {\n\t    var timer;\n\t    window.BASE_URL || (window.BASE_URL = 'https://nekobato.github.io/GyazzAC/');\n\t    $('head').append(\"<link rel='stylesheet' href='\" + window.BASE_URL + \"gyazzac.css' type='text/css'>\");\n\t    $('body').prepend('<div id=\"gyazz_ac\" class=\"gyazz-ac\"></div>');\n\t    $('body').append('<div class=\"progress-bar\"></div>');\n\t    timer = false;\n\t    return $(window).resize(function() {\n\t      if (timer !== false) {\n\t        clearTimeout(timer);\n\t      }\n\t      return timer = setTimeout(function() {\n\t        return document.body.style.zoom = $(document).width() / window_size;\n\t      }, 200);\n\t    });\n\t  };\n\t\n\t  refresh = function() {\n\t    var ac, i, j, k, len, len1, line, n, page, pages;\n\t    ac = document.createElement('div');\n\t    ac.innerHTML = \"<div class='ac-page ac-title'><p>\" + ($('.title').text()) + \"</p></div>\";\n\t    pages = [];\n\t    n = -1;\n\t    for (i = j = 0, len = ac_lines.length; j < len; i = ++j) {\n\t      line = ac_lines[i];\n\t      if (line.level === 'listedit0') {\n\t        n++;\n\t        pages[n] = document.createElement('div');\n\t        if (!ac_lines[i + 1] || ac_lines[i + 1].level === 'listedit0') {\n\t          pages[n].className = 'ac-page ac-single';\n\t        } else {\n\t          pages[n].className = 'ac-page';\n\t        }\n\t      }\n\t      pages[n].innerHTML += \"<div class='ac-line ac-\" + line.level + \"'>\" + line.html + \"</div>\";\n\t    }\n\t    ac_page_total = pages.length;\n\t    for (k = 0, len1 = pages.length; k < len1; k++) {\n\t      page = pages[k];\n\t      ac.appendChild(page);\n\t    }\n\t    $('#gyazz_ac').html(ac);\n\t    $('.ac-page').eq(ac_page).addClass('active');\n\t  };\n\t\n\t  progress = function() {\n\t    var pp;\n\t    pp = (ac_page + 1) / (ac_page_total + 1) * 100;\n\t    return $('.progress-bar').css('width', Math.floor(pp) + '%');\n\t  };\n\t\n\t  GyazzA.prototype.prev = function() {\n\t    if (ac_page > 0) {\n\t      $('#gyazz_ac .active').removeClass('active').prev().addClass('active');\n\t      ac_page--;\n\t      return progress();\n\t    }\n\t  };\n\t\n\t  GyazzA.prototype.next = function() {\n\t    if ($('.ac-page').eq(ac_page + 1).length) {\n\t      $('#gyazz_ac .active').removeClass('active').next().addClass('active');\n\t      ac_page++;\n\t      return progress();\n\t    }\n\t  };\n\t\n\t  GyazzA.prototype.c = function() {\n\t    attachAC();\n\t    fetchGyazz();\n\t    observer = new MutationObserver(function(mutations) {\n\t      return fetchGyazz();\n\t    }).observe(document.querySelector('#listbg0'), {\n\t      attributes: true,\n\t      attributeFilter: [\"class\"]\n\t    });\n\t    refresh();\n\t    $(document).scrollTop(0);\n\t    return this;\n\t  };\n\t\n\t  return GyazzA;\n\t\n\t})();\n\t\n\t$(document).off('keydown').on('keydown', function(e, order) {\n\t  if (e.which === 8 || e.which === 37 || order === 'prev') {\n\t    e.preventDefault();\n\t    return ac.prev();\n\t  } else if (e.which === 13 || e.which === 39 || order === 'next') {\n\t    e.preventDefault();\n\t    return ac.next();\n\t  }\n\t});\n\t\n\t$('#contents').on('click', function() {\n\t  return $(this).toggleClass('pulldown');\n\t});\n\t\n\twindow.ac = new GyazzA().c();\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** gyazzac.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a1eec22a43af80eee22c\n **/","class GyazzA\n\n  gyazz_lines = []\n  ac_lines = []\n  ac_page = 0\n  ac_page_total = 0\n  observer = null\n\n  window_size = '980'\n\n\n  fetchGyazz = ->\n\n    changeFlag = false\n\n    $('#contents > div:visible').each (index) ->\n      $this = $(this)\n      $line = $this.children('span').html()\n      if gyazz_lines[index] isnt $line\n        gyazz_lines[index] = $line\n        ac_lines[index] =\n          level: $this.attr('class')\n          html:  $line\n        changeFlag = true\n\n    refresh() if changeFlag\n    return\n\n\n  attachAC = ->\n\n    window.BASE_URL || = 'https://nekobato.github.io/GyazzAC/'\n    $('head').append \"<link rel='stylesheet' href='#{window.BASE_URL}gyazzac.css' type='text/css'>\"\n    $('body').prepend '<div id=\"gyazz_ac\" class=\"gyazz-ac\"></div>'\n    $('body').append '<div class=\"progress-bar\"></div>'\n\n    # resizeの度にzoomを変更する\n    timer = false\n    $(window).resize ->\n      unless timer is false\n        clearTimeout(timer)\n      timer = setTimeout ->\n        document.body.style.zoom = $(document).width() / window_size\n      , 200\n\n\n  refresh = ->\n\n    ac = document.createElement 'div'\n    ac.innerHTML = \"<div class='ac-page ac-title'><p>#{$('.title').text()}</p></div>\"\n\n    pages = []\n    n = -1\n\n    for line, i in ac_lines\n      if line.level is 'listedit0'\n        n++\n        pages[n] = document.createElement 'div'\n        if !ac_lines[i+1] or ac_lines[i+1].level is 'listedit0'\n          pages[n].className = 'ac-page ac-single'\n        else\n          pages[n].className = 'ac-page'\n      pages[n].innerHTML += \"<div class='ac-line ac-#{line.level}'>#{line.html}</div>\"\n\n    ac_page_total = pages.length\n\n    for page in pages\n      ac.appendChild(page)\n\n    $('#gyazz_ac').html(ac)\n    $('.ac-page').eq(ac_page).addClass 'active'\n    return\n\n\n  progress = ->\n    pp = (ac_page+1) / (ac_page_total+1) * 100\n    $('.progress-bar').css('width', Math.floor(pp) + '%')\n\n\n  prev: ->\n    if ac_page > 0\n      $('#gyazz_ac .active').removeClass 'active'\n      .prev().addClass 'active'\n      ac_page--\n      progress()\n\n  next: ->\n    if $('.ac-page').eq(ac_page+1).length\n      $('#gyazz_ac .active').removeClass 'active'\n      .next().addClass 'active'\n      ac_page++\n      progress()\n\n\n\n  c: -> # init\n\n    attachAC()\n    fetchGyazz()\n\n    observer = new MutationObserver (mutations) ->\n      # どうせ全書き換えなのでmutationsは使わない\n      fetchGyazz()\n    .observe document.querySelector('#listbg0'),\n      attributes: true\n      attributeFilter: [\"class\"]\n\n    refresh()\n    $(document).scrollTop(0)\n    return @\n\n\n$(document).off 'keydown'\n.on 'keydown', (e, order) ->\n  if e.which is 8 or e.which is 37 or order is 'prev' # bs or left\n    e.preventDefault()\n    ac.prev()\n  else if e.which is 13 or e.which is 39 or order is 'next' # Enter, Right\n    e.preventDefault()\n    ac.next()\n\n$('#contents').on 'click', () ->\n  $(this).toggleClass('pulldown')\n\nwindow.ac = new GyazzA().c()\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/gyazzac.coffee\n **/"],"sourceRoot":""}